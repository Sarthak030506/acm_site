<!DOCTYPE html>

<html class="light" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="icon" type="image/png" href="../components/ACM_NMIET_LOGO.png" />
    <title>ACM NMIET - Home</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&amp;display=swap"
        rel="stylesheet" />
    <!-- Material Symbols -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Theme Config -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0a82c2",
                        "background-light": "#f5f7f8",
                        "background-dark": "#101c22",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        /* Custom scrollbar for dropdown if needed */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 antialiased selection:bg-primary selection:text-white">
    <!-- Main Wrapper -->
    <div class="relative min-h-screen flex flex-col">
        <!-- Navbar Component (Loaded Dynamically) -->
        <div id="acm-navbar"></div>
        <script src="../assets/js/navbar_loader.js"></script>
        <!-- Hero Section (for context) -->
        <main class="flex-grow">
            <div class="relative w-full min-h-[500px] md:min-h-[600px] py-16 md:py-0 flex items-center overflow-hidden">
                <!-- Background Image with Overlay -->
                <div class="absolute inset-0 z-0 bg-cover bg-center bg-no-repeat"
                    style='background-image: linear-gradient(rgba(15, 28, 35, 0.7), rgba(15, 28, 35, 0.85)), url("NMIET-SKY-VIEW.jpg");'>
                </div>
                <!-- Content -->
                <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-start gap-6">
                    <div
                        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/20 text-white text-sm font-medium backdrop-blur-sm">
                        <span class="relative flex h-2 w-2">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-2 w-2 bg-white"></span>
                        </span>
                        Accepting New Members
                    </div>
                    <h1 class="text-5xl md:text-7xl font-bold text-white tracking-tight max-w-3xl drop-shadow-lg">
                        Advancing Computing as a <span class="text-blue-300">Science &amp; Profession</span>
                    </h1>
                    <p class="text-xl text-gray-200 max-w-2xl leading-relaxed drop-shadow-md">
                        Welcome to the ACM NMIET Student Chapter. We are a community of innovators, thinkers, and
                        builders shaping the future of technology.
                    </p>
                    <div class="flex flex-wrap gap-4 pt-4">
                        <a href="../events/"
                            class="px-8 py-4 bg-primary text-white rounded-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/30 hover:shadow-xl hover:-translate-y-1 inline-flex items-center justify-center">
                            Explore Activities
                        </a>
                        <a href="../about/"
                            class="px-8 py-4 bg-white dark:bg-slate-800 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700 rounded-lg font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-all inline-flex items-center justify-center">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
            <!-- Content Placeholder to enable scrolling -->
            <section class="py-24 bg-white dark:bg-background-dark border-t border-slate-100 dark:border-slate-800">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Card 1 -->
                        <div
                            class="p-6 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700 hover:border-primary/50 transition-colors">
                            <div
                                class="size-12 rounded-xl bg-blue-100 dark:bg-blue-900/30 text-primary flex items-center justify-center mb-4">
                                <span class="material-symbols-outlined text-3xl">code</span>
                            </div>
                            <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Technical Workshops</h3>
                            <p class="text-slate-600 dark:text-slate-400">Hands-on sessions on the latest tech stacks
                                and programming languages.</p>
                        </div>
                        <!-- Card 2 -->
                        <div
                            class="p-6 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700 hover:border-primary/50 transition-colors">
                            <div
                                class="size-12 rounded-xl bg-purple-100 dark:bg-purple-900/30 text-purple-600 flex items-center justify-center mb-4">
                                <span class="material-symbols-outlined text-3xl">groups</span>
                            </div>
                            <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Networking</h3>
                            <p class="text-slate-600 dark:text-slate-400">Connect with industry professionals and
                                like-minded peers.</p>
                        </div>
                        <!-- Card 3 -->
                        <div
                            class="p-6 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700 hover:border-primary/50 transition-colors">
                            <div
                                class="size-12 rounded-xl bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 flex items-center justify-center mb-4">
                                <span class="material-symbols-outlined text-3xl">emoji_events</span>
                            </div>
                            <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Hackathons</h3>
                            <p class="text-slate-600 dark:text-slate-400">Compete in 24-hour coding marathons to solve
                                real-world problems.</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Upcoming Activities Section -->
            <section class="py-20 px-4 bg-slate-50 dark:bg-slate-900/50">
                <div class="max-w-7xl mx-auto">
                    <div
                        class="flex flex-col md:flex-row justify-between items-end gap-6 mb-12 border-b border-slate-200 dark:border-slate-700 pb-4">
                        <div class="flex flex-col gap-2">
                            <h2 class="text-slate-900 dark:text-white text-3xl font-bold leading-tight">What's Coming Up
                            </h2>
                            <p class="text-slate-600 dark:text-slate-400 text-base">Stay updated with our latest
                                workshops, hackathons, and seminars.</p>
                        </div>
                        <a class="hidden md:flex items-center gap-2 text-primary font-bold hover:text-primary/80 transition-colors"
                            href="../events/">
                            View All Activities <span class="material-symbols-outlined">arrow_right_alt</span>
                        </a>
                    </div>
                    <div id="activities-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Activities will be loaded dynamically from Firebase -->
                        <div class="col-span-full text-center py-12 text-slate-500 dark:text-slate-400">
                            <span class="material-symbols-outlined text-5xl mb-3 animate-pulse">refresh</span>
                            <p>Loading upcoming activities...</p>
                        </div>
                    </div>
                    <div class="mt-8 text-center md:hidden">
                        <a class="inline-flex items-center gap-2 text-primary font-bold hover:text-primary/80 transition-colors"
                            href="../events/">
                            View All Activities <span class="material-symbols-outlined">arrow_right_alt</span>
                        </a>
                    </div>
                </div>
            </section>
        </main>
        <!-- Dynamic Footer -->
        <div id="acm-footer"></div>
        <script src="../assets/js/footer_loader.js"></script>
    </div>


    <script type="module">
        import { db } from '../assets/js/firebase_config.js';
        import { collection, getDocs, query, orderBy, where, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        async function loadActivities() {
            const container = document.getElementById('activities-container');

            try {
                // Fetch upcoming and ongoing activities
                const q = query(
                    collection(db, "activities"),
                    where("status", "in", ["upcoming", "ongoing"]),
                    orderBy("createdAt", "desc"),
                    limit(3)
                );
                const snapshot = await getDocs(q);

                // Clear loading state
                container.innerHTML = '';

                if (snapshot.empty) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-12 text-slate-500 dark:text-slate-400">
                            <span class="material-symbols-outlined text-5xl mb-3">event_busy</span>
                            <p class="text-lg font-medium">No upcoming activities at the moment.</p>
                            <p class="text-sm mt-2">Check back soon for exciting workshops, seminars, and hackathons!</p>
                        </div>
                    `;
                    return;
                }

                // Create activity cards
                snapshot.forEach(doc => {
                    const activity = doc.data();
                    const card = createActivityCard(activity, doc.id);
                    container.appendChild(card);
                });

            } catch (error) {
                console.error("Error loading activities:", error);
                container.innerHTML = `
                    <div class="col-span-full text-center py-12 text-red-500">
                        <span class="material-symbols-outlined text-5xl mb-3">error</span>
                        <p class="text-lg font-medium">Failed to load activities.</p>
                        <p class="text-sm mt-2">Please refresh the page or contact support.</p>
                    </div>
                `;
            }
        }

        function createActivityCard(activity, docId) {
            const div = document.createElement('a');
            div.href = `../event/?id=${docId}`;
            div.className = "flex flex-col overflow-hidden rounded-xl bg-white dark:bg-slate-800 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all border border-slate-100 dark:border-slate-700 h-full cursor-pointer";

            // Activity type badge color
            const badgeColors = {
                'workshop': 'bg-primary',
                'seminar': 'bg-indigo-500',
                'hackathon': 'bg-orange-500',
                'competition': 'bg-purple-500',
                'event': 'bg-green-500'
            };
            const badgeColor = badgeColors[activity.activityType] || 'bg-primary';

            // Status badge
            let statusBadge = '';
            let statusColor = 'emerald';
            let statusText = 'Upcoming';

            if (activity.status === 'ongoing') {
                statusColor = 'green';
                statusText = 'Ongoing';
            } else if (activity.status === 'completed') {
                statusColor = 'gray';
                statusText = 'Completed';
            }

            statusBadge = `
                <span class="flex items-center gap-1 text-xs font-medium text-${statusColor}-600 bg-${statusColor}-50 dark:bg-${statusColor}-900/30 dark:text-${statusColor}-400 px-2 py-0.5 rounded">
                    <span class="w-1.5 h-1.5 rounded-full bg-${statusColor}-500"></span> ${statusText}
                </span>
            `;

            // Format date
            let dateDisplay = activity.date || 'Date TBA';

            div.innerHTML = `
                <div class="h-48 bg-slate-200 dark:bg-slate-700 relative">
                    <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('${activity.imageURL || 'https://via.placeholder.com/400x200'}');"></div>
                    <div class="absolute top-4 left-4 ${badgeColor} text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">
                        ${activity.activityType}
                    </div>
                </div>
                <div class="p-6 flex flex-col flex-1">
                    <div class="flex items-center gap-2 mb-3">
                        ${statusBadge}
                        <span class="text-xs text-slate-500 dark:text-slate-400">${dateDisplay}</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">${activity.title}</h3>
                    <p class="text-slate-600 dark:text-slate-400 text-sm mb-6 flex-1">${activity.description || 'More details coming soon!'}</p>
                    <span class="w-full py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white font-semibold hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-center block">
                        View Details
                    </span>
                </div>
            `;

            return div;
        }

        // Load activities when page loads
        loadActivities();
    </script>
</body>

</html>