<!DOCTYPE html>

<html class="light" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Our Team - ACM NMIET</title>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&amp;display=swap"
    rel="stylesheet" />
  <!-- Material Symbols -->
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
    rel="stylesheet" />
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
    rel="stylesheet" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <!-- Theme Config -->
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#0a82c2",
            "background-light": "#f5f7f8",
            "background-dark": "#101c22",
          },
          fontFamily: {
            "display": ["Space Grotesk", "sans-serif"]
          },
          borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
        },
      },
    }
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
    }

    /* Shimmer animation for card borders */
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Smooth spin animation */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white transition-colors duration-200">
  <div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
    <!-- Navbar Component (Loaded Dynamically) -->
    <div id="acm-navbar"></div>
    <main class="flex-grow">
      <!-- Hero Section -->
      <section
        class="relative flex flex-col items-center justify-center py-20 px-4 lg:px-40 bg-cover bg-center bg-no-repeat"
        data-alt="Abstract blue geometric pattern background representing technology and connectivity"
        style='background-image: linear-gradient(rgba(15, 28, 35, 0.8), rgba(15, 28, 35, 0.9)), url("https://lh3.googleusercontent.com/aida-public/AB6AXuBiKFJS2Md5p-BRFhUzL-yC-bRV-yMC2Ioh7fE6eH_C5lfwJ1Y_olsK28-3yj0HfZ3DlyZFIAF-rTHc0nG_O4tcJISEA9BNc0TWsmRI4a_1QqqEl3bdjBBaEeqP8ll1ZV6zywEkc4A8uz4jMBoqHCmrA8JsMsasKEppNBoUwPdjAV2TTi-0YOQ8uBMsHchqMsmIlmpUhBA-jjaDVkDPH9-X1WXFc6lnTBZAwOaLsF6Wpf_XePk7FW38hj5jkXE4HWl087g7MacGqpke");'>
        <div class="max-w-[800px] text-center space-y-4 animate-fade-in-up">
          <span
            class="inline-block py-1 px-3 rounded-full bg-primary/20 text-primary text-xs font-bold uppercase tracking-wider border border-primary/20 backdrop-blur-sm">
            Community First
          </span>
          <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-black leading-tight tracking-[-0.033em]">
            Meet Our Team
          </h1>
          <p class="text-slate-200 text-lg md:text-xl font-normal max-w-2xl mx-auto leading-relaxed">
            The founding members, visionaries, and hard workers building the future of ACM NMIET.
          </p>
        </div>
      </section>
      <!-- Team Sections Container -->
      <div id="team-sections-container">
        <!-- Loading indicator -->
        <section class="py-16 px-4 lg:px-40 bg-background-light dark:bg-background-dark">
          <div class="max-w-[1200px] mx-auto flex justify-center p-10">
            <span class="material-symbols-outlined animate-spin text-4xl text-primary">progress_activity</span>
          </div>
        </section>
      </div>

      <script type="module">
        import { db } from '../assets/js/firebase_config.js';
        import { collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const sectionsContainer = document.getElementById('team-sections-container');

        // Create APEX Faculty Sponsor Card (Most Prominent)
        function createFacultySponsorCard(member) {
          return `
            <div class="group relative w-full max-w-4xl mx-auto">
              <!-- Outer Glow -->
              <div class="absolute -inset-1 bg-gradient-to-r from-amber-400 via-yellow-500 to-amber-400 rounded-3xl blur-lg opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>

              <div class="relative flex flex-col md:flex-row items-center gap-8 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 rounded-3xl p-8 md:p-10 overflow-hidden border border-amber-500/30">

                <!-- Decorative Elements -->
                <div class="absolute top-0 left-0 w-full h-full overflow-hidden rounded-3xl">
                  <div class="absolute top-0 right-0 w-96 h-96 bg-amber-500/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"></div>
                  <div class="absolute bottom-0 left-0 w-64 h-64 bg-yellow-500/10 rounded-full blur-3xl transform -translate-x-1/2 translate-y-1/2"></div>
                  <div class="absolute top-1/2 left-1/2 w-32 h-32 bg-amber-400/5 rounded-full blur-2xl transform -translate-x-1/2 -translate-y-1/2"></div>
                </div>

                <!-- Crown/Badge Icon -->
                <div class="absolute top-4 right-4 md:top-6 md:right-6">
                  <div class="flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-yellow-500 rounded-full text-slate-900 text-xs font-bold uppercase tracking-wider shadow-lg shadow-amber-500/30">
                    <span class="material-symbols-outlined text-sm">workspace_premium</span>
                    Faculty Sponsor
                  </div>
                </div>

                <!-- Image Section -->
                <div class="relative shrink-0">
                  <!-- Animated Ring -->
                  <div class="absolute -inset-3 rounded-full bg-gradient-to-r from-amber-400 via-yellow-500 to-amber-400 opacity-60 group-hover:animate-[spin_4s_linear_infinite]"></div>
                  <div class="absolute -inset-2 rounded-full bg-slate-900"></div>

                  <!-- Image -->
                  <div class="relative w-40 h-40 md:w-48 md:h-48 rounded-full overflow-hidden border-4 border-amber-500/50 shadow-2xl shadow-amber-500/20">
                    <img
                      src="${member.photoURL || 'https://via.placeholder.com/200'}"
                      alt="${member.name}"
                      class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
                      onerror="this.onerror=null; this.src='https://via.placeholder.com/200';"
                    />
                  </div>
                </div>

                <!-- Content Section -->
                <div class="relative flex-1 text-center md:text-left">
                  <h3 class="text-3xl md:text-4xl font-black text-white mb-2 tracking-tight">${member.name}</h3>
                  <p class="text-amber-400 font-semibold text-lg mb-4">${member.position || member.department || 'Faculty Sponsor'}</p>

                  ${member.department ? `
                  <p class="flex items-center justify-center md:justify-start gap-2 text-slate-400 mb-2">
                    <span class="material-symbols-outlined text-amber-500 text-xl">apartment</span>
                    ${member.department}
                  </p>` : ''}

                  <!-- Social Links -->
                  <div class="flex items-center justify-center md:justify-start gap-3 mt-6">
                    ${member.linkedin ? `
                    <a href="${member.linkedin}" target="_blank" class="flex items-center justify-center w-12 h-12 rounded-xl bg-white/10 text-white hover:bg-amber-500 hover:text-slate-900 transition-all duration-300 hover:shadow-lg hover:shadow-amber-500/30">
                      <span class="material-symbols-outlined">link</span>
                    </a>` : ''}
                    ${member.github ? `
                    <a href="${member.github}" target="_blank" class="flex items-center justify-center w-12 h-12 rounded-xl bg-white/10 text-white hover:bg-amber-500 hover:text-slate-900 transition-all duration-300 hover:shadow-lg hover:shadow-amber-500/30">
                      <span class="material-symbols-outlined">code</span>
                    </a>` : ''}
                  </div>
                </div>
              </div>
            </div>
          `;
        }

        // Create Faculty Coordinator Card (Prominent but smaller)
        function createFacultyCoordinatorCard(member) {
          return `
            <div class="group relative w-full">
              <!-- Outer Glow -->
              <div class="absolute -inset-0.5 bg-gradient-to-r from-cyan-500 via-blue-500 to-cyan-500 rounded-2xl blur opacity-30 group-hover:opacity-60 transition-opacity duration-500"></div>

              <div class="relative flex flex-col items-center bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 rounded-2xl p-6 overflow-hidden border border-cyan-500/20">

                <!-- Decorative Elements -->
                <div class="absolute top-0 right-0 w-40 h-40 bg-cyan-500/10 rounded-full blur-2xl transform translate-x-1/4 -translate-y-1/4"></div>
                <div class="absolute bottom-0 left-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl transform -translate-x-1/4 translate-y-1/4"></div>

                <!-- Badge -->
                <div class="absolute top-3 right-3">
                  <div class="flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full text-white text-[10px] font-bold uppercase tracking-wider">
                    <span class="material-symbols-outlined text-xs">verified</span>
                    Coordinator
                  </div>
                </div>

                <!-- Image Section -->
                <div class="relative mt-4 mb-4">
                  <!-- Animated Ring -->
                  <div class="absolute -inset-2 rounded-full bg-gradient-to-r from-cyan-400 via-blue-500 to-cyan-400 opacity-50 group-hover:animate-[spin_5s_linear_infinite] group-hover:opacity-80 transition-opacity"></div>
                  <div class="absolute -inset-1 rounded-full bg-slate-900"></div>

                  <!-- Image -->
                  <div class="relative w-28 h-28 rounded-full overflow-hidden border-2 border-cyan-500/50 shadow-xl shadow-cyan-500/20">
                    <img
                      src="${member.photoURL || 'https://via.placeholder.com/150'}"
                      alt="${member.name}"
                      class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
                      onerror="this.onerror=null; this.src='https://via.placeholder.com/150';"
                    />
                  </div>
                </div>

                <!-- Content -->
                <h3 class="text-xl font-bold text-white mb-1 text-center">${member.name}</h3>
                <p class="text-cyan-400 font-medium text-sm mb-2 text-center">${member.position || 'Faculty Coordinator'}</p>

                ${member.department ? `
                <p class="flex items-center gap-1.5 text-slate-400 text-xs mb-4">
                  <span class="material-symbols-outlined text-cyan-500 text-sm">apartment</span>
                  ${member.department}
                </p>` : ''}

                <!-- Social Links -->
                <div class="flex items-center gap-2 mt-auto">
                  ${member.linkedin ? `
                  <a href="${member.linkedin}" target="_blank" class="flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 text-white hover:bg-cyan-500 hover:text-white transition-all duration-300">
                    <span class="material-symbols-outlined text-lg">link</span>
                  </a>` : ''}
                  ${member.github ? `
                  <a href="${member.github}" target="_blank" class="flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 text-white hover:bg-cyan-500 hover:text-white transition-all duration-300">
                    <span class="material-symbols-outlined text-lg">code</span>
                  </a>` : ''}
                </div>
              </div>
            </div>
          `;
        }

        // Create regular member card HTML
        function createMemberCard(member) {
          return `
            <div class="group relative w-full overflow-hidden rounded-2xl bg-gradient-to-br from-white to-slate-50 dark:from-[#1e293b] dark:to-[#0f172a] transition-all duration-500 hover:-translate-y-3 hover:shadow-2xl hover:shadow-primary/20">

              <!-- Animated Gradient Border -->
              <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-primary via-cyan-400 to-primary bg-[length:200%_100%] opacity-0 group-hover:opacity-100 group-hover:animate-[shimmer_2s_linear_infinite] transition-opacity duration-500 p-[2px]">
                <div class="w-full h-full rounded-2xl bg-gradient-to-br from-white to-slate-50 dark:from-[#1e293b] dark:to-[#0f172a]"></div>
              </div>

              <!-- Card Content -->
              <div class="relative p-6 flex flex-col items-center text-center">

                <!-- Decorative Background Elements -->
                <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/10 to-cyan-400/10 rounded-full blur-2xl transform translate-x-10 -translate-y-10 group-hover:scale-150 transition-transform duration-700"></div>
                <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-500/10 to-pink-400/10 rounded-full blur-2xl transform -translate-x-8 translate-y-8 group-hover:scale-150 transition-transform duration-700"></div>

                <!-- Top Accent Bar -->
                <div class="absolute top-0 left-1/2 -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-primary to-cyan-400 rounded-full transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>

                <!-- Image Container with Glow Effect -->
                <div class="relative mt-4 mb-5">
                  <!-- Glow Ring -->
                  <div class="absolute inset-0 rounded-full bg-gradient-to-r from-primary to-cyan-400 blur-md opacity-0 group-hover:opacity-60 transition-opacity duration-500 scale-110"></div>

                  <!-- Rotating Border -->
                  <div class="absolute -inset-1 rounded-full bg-gradient-to-r from-primary via-cyan-400 to-purple-500 opacity-0 group-hover:opacity-100 group-hover:animate-[spin_3s_linear_infinite] transition-opacity duration-300"></div>

                  <!-- Image Wrapper -->
                  <div class="relative w-28 h-28 rounded-full p-1 bg-white dark:bg-slate-800">
                    <div class="w-full h-full rounded-full overflow-hidden bg-slate-200 dark:bg-slate-700">
                      <img
                        src="${member.photoURL || 'https://via.placeholder.com/150'}"
                        alt="${member.name}"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
                        onerror="this.onerror=null; this.src='https://via.placeholder.com/150';"
                      />
                    </div>
                  </div>
                </div>

                <!-- Name with Gradient on Hover -->
                <h3 class="text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:bg-gradient-to-r group-hover:from-primary group-hover:to-cyan-500 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-300">${member.name}</h3>

                <!-- Role Badge -->
                <div class="relative mb-5">
                  <span class="inline-block px-4 py-1.5 text-xs font-bold uppercase tracking-wider text-primary bg-primary/10 rounded-full border border-primary/20 group-hover:bg-primary group-hover:text-white group-hover:border-primary transition-all duration-300">${member.role}</span>
                </div>

                <!-- Social Links with Hover Effects -->
                <div class="flex items-center gap-3 mt-auto">
                  ${member.linkedin ? `
                  <a href="${member.linkedin}" target="_blank" class="relative flex items-center justify-center w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 overflow-hidden group/btn transition-all duration-300 hover:shadow-lg hover:shadow-[#0077b5]/30">
                    <div class="absolute inset-0 bg-gradient-to-r from-[#0077b5] to-[#00a0dc] transform translate-y-full group-hover/btn:translate-y-0 transition-transform duration-300"></div>
                    <span class="material-symbols-outlined text-[20px] relative z-10 group-hover/btn:text-white transition-colors">link</span>
                  </a>` : ''}

                  ${member.github ? `
                  <a href="${member.github}" target="_blank" class="relative flex items-center justify-center w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 overflow-hidden group/btn transition-all duration-300 hover:shadow-lg hover:shadow-slate-900/30">
                    <div class="absolute inset-0 bg-gradient-to-r from-slate-800 to-slate-900 transform translate-y-full group-hover/btn:translate-y-0 transition-transform duration-300"></div>
                    <span class="material-symbols-outlined text-[20px] relative z-10 group-hover/btn:text-white transition-colors">code</span>
                  </a>` : ''}
                </div>
              </div>
            </div>
          `;
        }

        // Create section header HTML
        function createSectionHeader(section) {
          return `
            <div class="text-center mb-12">
              <h2 class="text-slate-900 dark:text-white text-3xl font-bold tracking-tight mb-3 italic">${section.name}</h2>
              <p class="text-slate-600 dark:text-slate-400 text-lg italic max-w-2xl mx-auto">"${section.tagline}"</p>
            </div>
          `;
        }

        // Create Faculty Sponsor Section (APEX - Most Prominent)
        function createFacultySponsorSection(members) {
          if (members.length === 0) return '';

          const sponsorCards = members.map(m => createFacultySponsorCard(m)).join('');

          return `
            <section class="py-20 px-4 lg:px-40 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden">
              <!-- Background Pattern -->
              <div class="absolute inset-0 opacity-5">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 40px 40px;"></div>
              </div>

              <div class="max-w-[1200px] mx-auto relative">
                <div class="text-center mb-12">
                  <span class="inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 rounded-full text-amber-400 text-sm font-semibold mb-4 border border-amber-500/30">
                    <span class="material-symbols-outlined">workspace_premium</span>
                    Guiding Light
                  </span>
                  <h2 class="text-white text-4xl font-black tracking-tight mb-3">Faculty Sponsor</h2>
                  <p class="text-slate-400 text-lg italic max-w-2xl mx-auto">"Guiding and inspiring the next generation of computing professionals."</p>
                </div>
                <div class="flex flex-col gap-8">
                  ${sponsorCards}
                </div>
              </div>
            </section>
          `;
        }

        // Create Faculty Coordinators Section
        function createFacultyCoordinatorsSection(members) {
          if (members.length === 0) return '';

          const coordinatorCards = members.map(m => createFacultyCoordinatorCard(m)).join('');

          return `
            <section class="py-16 px-4 lg:px-40 bg-gradient-to-b from-slate-900 to-slate-800 relative overflow-hidden">
              <!-- Background Pattern -->
              <div class="absolute inset-0 opacity-5">
                <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 32px 32px;"></div>
              </div>

              <div class="max-w-[1200px] mx-auto relative">
                <div class="text-center mb-12">
                  <span class="inline-flex items-center gap-2 px-4 py-2 bg-cyan-500/20 rounded-full text-cyan-400 text-sm font-semibold mb-4 border border-cyan-500/30">
                    <span class="material-symbols-outlined">verified</span>
                    Academic Mentors
                  </span>
                  <h2 class="text-white text-3xl font-bold tracking-tight mb-3">Faculty Coordinators</h2>
                  <p class="text-slate-400 text-lg italic max-w-2xl mx-auto">"Bridging academia and innovation with wisdom and dedication."</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto">
                  ${coordinatorCards}
                </div>
              </div>
            </section>
          `;
        }

        // Create full section HTML for regular members
        function createSection(section, members, index) {
          const bgClass = index % 2 === 0
            ? 'bg-background-light dark:bg-background-dark'
            : 'bg-white dark:bg-[#13222b]';

          const memberCards = members.map(m => createMemberCard(m)).join('');

          return `
            <section class="py-16 px-4 lg:px-40 ${bgClass}">
              <div class="max-w-[1200px] mx-auto">
                ${createSectionHeader(section)}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                  ${memberCards}
                </div>
              </div>
            </section>
          `;
        }

        async function loadTeamWithSections() {
          try {
            // Fetch all sections ordered by 'order' field
            const sectionsQuery = query(collection(db, "team_sections"), orderBy("order", "asc"));
            const sectionsSnapshot = await getDocs(sectionsQuery);

            // Fetch all team members
            const membersQuery = query(collection(db, "team_members"), orderBy("createdAt", "desc"));
            const membersSnapshot = await getDocs(membersQuery);

            // Convert members to array
            const allMembers = [];
            membersSnapshot.forEach(doc => {
              allMembers.push({ id: doc.id, ...doc.data() });
            });

            // Define Faculty roles (case-insensitive matching)
            const facultySponsorRoles = ['faculty sponsor', 'faculty advisor', 'sponsor'];
            const facultyCoordinatorRoles = ['faculty coordinator', 'coordinator', 'faculty co-ordinator'];

            // Separate Faculty Sponsors
            const facultySponsors = allMembers.filter(m => {
              const role = (m.role || '').toLowerCase().trim();
              return facultySponsorRoles.some(r => role.includes(r) || r.includes(role));
            });

            // Separate Faculty Coordinators
            const facultyCoordinators = allMembers.filter(m => {
              const role = (m.role || '').toLowerCase().trim();
              return facultyCoordinatorRoles.some(r => role.includes(r) || r.includes(role));
            });

            // Track assigned members (faculty)
            let assignedMembers = new Set();
            facultySponsors.forEach(m => assignedMembers.add(m.id));
            facultyCoordinators.forEach(m => assignedMembers.add(m.id));

            // Build HTML starting with Faculty sections
            let sectionsHTML = '';

            // 1. Faculty Sponsor Section (APEX Priority)
            sectionsHTML += createFacultySponsorSection(facultySponsors);

            // 2. Faculty Coordinators Section
            sectionsHTML += createFacultyCoordinatorsSection(facultyCoordinators);

            // If no sections defined, show remaining members in one section
            if (sectionsSnapshot.empty) {
              const remainingMembers = allMembers.filter(m => !assignedMembers.has(m.id));
              if (remainingMembers.length > 0 || (facultySponsors.length === 0 && facultyCoordinators.length === 0)) {
                sectionsHTML += `
                  <section class="py-16 px-4 lg:px-40 bg-background-light dark:bg-background-dark">
                    <div class="max-w-[1200px] mx-auto">
                      <div class="text-center mb-12">
                        <h2 class="text-slate-900 dark:text-white text-3xl font-bold tracking-tight mb-2">Our Team</h2>
                        <div class="h-1 w-20 bg-primary mx-auto rounded-full"></div>
                      </div>
                      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        ${remainingMembers.length > 0
                    ? remainingMembers.map(m => createMemberCard(m)).join('')
                    : '<div class="col-span-full text-center text-slate-500">No team members to show yet.</div>'}
                      </div>
                    </div>
                  </section>
                `;
              }
              sectionsContainer.innerHTML = sectionsHTML;
              return;
            }

            // 3. Group remaining members by section based on their role
            let sectionIndex = 0;

            sectionsSnapshot.forEach(doc => {
              const section = doc.data();
              const positions = section.positions || [];

              // Find members whose role matches any position in this section (excluding already assigned faculty)
              const sectionMembers = allMembers.filter(member => {
                if (assignedMembers.has(member.id)) return false; // Skip already assigned
                const memberRole = (member.role || '').toLowerCase().trim();
                return positions.some(pos => pos.toLowerCase().trim() === memberRole);
              });

              // Track assigned members
              sectionMembers.forEach(m => assignedMembers.add(m.id));

              // Only show section if it has members
              if (sectionMembers.length > 0) {
                sectionsHTML += createSection(section, sectionMembers, sectionIndex);
                sectionIndex++;
              }
            });

            // Find unassigned members (those whose role doesn't match any section)
            const unassignedMembers = allMembers.filter(m => !assignedMembers.has(m.id));

            // Show unassigned members in "Other Members" section if any exist
            if (unassignedMembers.length > 0) {
              const otherSection = {
                name: "Other Members",
                tagline: "Contributing to the success of ACM NMIET"
              };
              sectionsHTML += createSection(otherSection, unassignedMembers, sectionIndex);
            }

            // If no sections had members, show empty state
            if (sectionsHTML === '') {
              sectionsHTML = `
                <section class="py-16 px-4 lg:px-40 bg-background-light dark:bg-background-dark">
                  <div class="max-w-[1200px] mx-auto text-center">
                    <p class="text-slate-500">No team members to show yet.</p>
                  </div>
                </section>
              `;
            }

            sectionsContainer.innerHTML = sectionsHTML;

          } catch (error) {
            console.error("Error loading team:", error);
            sectionsContainer.innerHTML = `
              <section class="py-16 px-4 lg:px-40 bg-background-light dark:bg-background-dark">
                <div class="max-w-[1200px] mx-auto text-center text-red-500">
                  Failed to load team members. Please try again later.
                </div>
              </section>
            `;
          }
        }

        loadTeamWithSections();
      </script>
      <!-- Recruitment CTA -->
      <section class="py-20 px-4 bg-primary text-white">
        <div class="max-w-[800px] mx-auto text-center">
          <span class="material-symbols-outlined text-5xl mb-4 text-white/80">group_add</span>
          <h2 class="text-3xl md:text-4xl font-bold mb-4">Interested in being part of the future?</h2>
          <p class="text-blue-100 text-lg mb-8 max-w-2xl mx-auto">We are always looking for passionate individuals to
            join our community. Whether you are a developer, designer, or just enthusiastic about tech.</p>
          <button
            class="bg-white text-primary hover:bg-slate-100 font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 text-lg">
            Get in Touch
          </button>
        </div>
      </section>
    </main>
    <!-- Footer (Simplified) -->
    <!-- Dynamic Footer -->
    <div id="acm-footer"></div>
    <script src="../assets/js/navbar_loader.js"></script>
    <script src="../assets/js/footer_loader.js"></script>
  </div>
</body>

</html>